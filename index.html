<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>La Caja Fuerte</title>
<link href="https://fonts.googleapis.com/css2?family=Special+Elite&family=Courier+Prime:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --gold: #c9a84c;
    --gold-light: #f0d080;
    --dark: #0d0c0a;
    --text: #d4c9a8;
  }

  body {
    background: var(--dark);
    color: var(--text);
    font-family: 'Courier Prime', monospace;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 20px 16px 60px;
    overflow-x: hidden;
  }

  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background:
      radial-gradient(ellipse at 15% 60%, rgba(60,40,10,0.35) 0%, transparent 55%),
      radial-gradient(ellipse at 85% 15%, rgba(80,50,10,0.2) 0%, transparent 50%);
    pointer-events: none;
    z-index: 0;
  }

  .wrapper {
    position: relative;
    z-index: 1;
    max-width: 680px;
    width: 100%;
  }

  /* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
  .stamp {
    font-family: 'Special Elite', cursive;
    font-size: 0.68rem;
    letter-spacing: 0.45em;
    color: var(--gold);
    opacity: 0.55;
    text-transform: uppercase;
    text-align: center;
    margin-bottom: 36px;
  }

  h1 {
    font-family: 'Special Elite', cursive;
    font-size: clamp(2.2rem, 7vw, 3.8rem);
    color: var(--gold-light);
    text-align: center;
    text-shadow: 0 0 50px rgba(201,168,76,0.35);
    margin-bottom: 6px;
  }

  .subtitle {
    text-align: center;
    font-size: 0.83rem;
    opacity: 0.45;
    font-style: italic;
    margin-bottom: 44px;
  }

  /* ‚îÄ‚îÄ PROGRESS ‚îÄ‚îÄ */
  .progress-wrap {
    display: flex;
    align-items: center;
    gap: 0;
    justify-content: center;
    margin-bottom: 44px;
  }

  .prog-step {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
  }

  .prog-circle {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    border: 1.5px solid rgba(201,168,76,0.25);
    background: rgba(201,168,76,0.05);
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'Special Elite', cursive;
    font-size: 0.75rem;
    color: rgba(201,168,76,0.35);
    transition: all 0.5s ease;
    position: relative;
  }

  .prog-circle.done {
    border-color: var(--gold);
    background: rgba(201,168,76,0.15);
    color: var(--gold);
    box-shadow: 0 0 12px rgba(201,168,76,0.4);
  }

  .prog-digit {
    font-size: 0.6rem;
    color: rgba(201,168,76,0.0);
    font-family: 'Special Elite', cursive;
    letter-spacing: 0.05em;
    transition: all 0.6s ease;
    height: 12px;
  }

  .prog-digit.revealed {
    color: var(--gold);
  }

  .prog-line {
    width: 40px;
    height: 1.5px;
    background: rgba(201,168,76,0.15);
    margin-bottom: 18px;
    transition: background 0.5s;
  }
  .prog-line.done { background: rgba(201,168,76,0.5); }

  /* ‚îÄ‚îÄ CLUE CARDS ‚îÄ‚îÄ */
  .clues { display: flex; flex-direction: column; gap: 18px; margin-bottom: 50px; }

  .clue-card {
    background: linear-gradient(135deg, rgba(255,255,255,0.028), rgba(255,255,255,0.008));
    border: 1px solid rgba(201,168,76,0.18);
    border-left: 3px solid rgba(201,168,76,0.5);
    padding: 22px 26px;
    border-radius: 3px;
    opacity: 0;
    transform: translateX(-18px);
    transition: opacity 0.5s ease, transform 0.5s ease, border-left-color 0.5s;
  }

  .clue-card.visible { opacity: 1; transform: translateX(0); }
  .clue-card.solved { border-left-color: #4a9b5f; }

  .clue-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 12px;
  }

  .clue-num {
    font-family: 'Special Elite', cursive;
    font-size: 0.62rem;
    letter-spacing: 0.35em;
    color: var(--gold);
    opacity: 0.6;
  }

  .clue-tag {
    font-size: 0.62rem;
    letter-spacing: 0.15em;
    color: rgba(201,168,76,0.4);
    font-style: italic;
  }

  .clue-text {
    font-size: 0.97rem;
    line-height: 1.8;
    color: #c5bc9c;
    margin-bottom: 16px;
  }

  .clue-text em {
    color: var(--gold-light);
    font-style: normal;
    font-weight: 700;
  }

  .clue-text .small {
    display: block;
    margin-top: 6px;
    font-size: 0.78rem;
    opacity: 0.5;
    font-style: italic;
  }

  /* Input de texto */
  .answer-row {
    display: flex;
    gap: 10px;
    align-items: center;
    flex-wrap: wrap;
  }

  .answer-input {
    background: rgba(0,0,0,0.45);
    border: 1px solid rgba(201,168,76,0.28);
    color: var(--gold-light);
    font-family: 'Courier Prime', monospace;
    font-size: 1rem;
    padding: 9px 16px;
    border-radius: 2px;
    outline: none;
    transition: border-color 0.3s;
    flex: 1;
    min-width: 160px;
    text-transform: uppercase;
    letter-spacing: 0.12em;
  }
  .answer-input::placeholder { opacity: 0.3; text-transform: none; letter-spacing: normal; }
  .answer-input:focus { border-color: var(--gold); }
  .answer-input.correct { border-color: #4a9b5f; background: rgba(74,155,95,0.08); color: #5bb870; }
  .answer-input.wrong { border-color: #8b2020; animation: shake 0.4s; }

  .btn-verify {
    background: transparent;
    border: 1px solid rgba(201,168,76,0.35);
    color: var(--gold);
    font-family: 'Courier Prime', monospace;
    font-size: 0.78rem;
    padding: 9px 18px;
    cursor: pointer;
    border-radius: 2px;
    letter-spacing: 0.12em;
    transition: all 0.25s;
    white-space: nowrap;
  }
  .btn-verify:hover { background: rgba(201,168,76,0.1); border-color: var(--gold); }
  .btn-verify:disabled { opacity: 0.25; cursor: not-allowed; }

  .hint-btn {
    background: transparent;
    border: none;
    color: rgba(201,168,76,0.4);
    font-family: 'Courier Prime', monospace;
    font-size: 0.7rem;
    cursor: pointer;
    padding: 0;
    text-decoration: underline;
    transition: color 0.2s;
  }
  .hint-btn:hover { color: var(--gold); }

  .hint-box {
    display: none;
    margin-top: 12px;
    padding: 10px 14px;
    border-left: 2px solid rgba(201,168,76,0.18);
    font-size: 0.79rem;
    color: #9a9070;
    font-style: italic;
    line-height: 1.6;
  }
  .hint-box.open { display: block; }

  /* Reveal de d√≠gito */
  .digit-reveal {
    display: none;
    margin-top: 14px;
    padding: 12px 16px;
    background: rgba(74,155,95,0.08);
    border: 1px solid rgba(74,155,95,0.25);
    border-radius: 2px;
    font-size: 0.85rem;
    color: #5bb870;
    letter-spacing: 0.05em;
    animation: popIn 0.4s ease;
  }
  .digit-reveal.show { display: flex; align-items: center; gap: 10px; }
  .digit-reveal .big-digit {
    font-family: 'Special Elite', cursive;
    font-size: 1.8rem;
    color: #00ff88;
    text-shadow: 0 0 12px rgba(0,255,136,0.5);
    line-height: 1;
  }
  .digit-reveal .reveal-text { line-height: 1.5; }
  .digit-reveal .reveal-text strong { color: #7dd890; }

  /* ‚îÄ‚îÄ DIVISOR ‚îÄ‚îÄ */
  .divider {
    display: flex; align-items: center; gap: 14px;
    margin: 44px 0; opacity: 0.28;
  }
  .divider::before, .divider::after { content: ''; flex: 1; height: 1px; background: var(--gold); }
  .divider span { font-family: 'Special Elite', cursive; font-size: 0.7rem; letter-spacing: 0.4em; color: var(--gold); }

  /* ‚îÄ‚îÄ CAJA FUERTE ‚îÄ‚îÄ */
  .safe-section { text-align: center; }

  .safe-label {
    font-family: 'Special Elite', cursive;
    font-size: 0.68rem;
    letter-spacing: 0.32em;
    color: var(--gold);
    opacity: 0.55;
    margin-bottom: 18px;
  }

  .safe {
    display: inline-block;
    background: linear-gradient(150deg, #272218, #161210);
    border: 2px solid #35280e;
    border-radius: 10px;
    padding: 28px 32px;
    box-shadow:
      0 0 0 1px #4a3e1a,
      0 24px 64px rgba(0,0,0,0.85),
      inset 0 1px 0 rgba(255,255,255,0.04);
    margin: 0 auto 20px;
    position: relative;
  }

  .safe::before {
    content: '';
    position: absolute;
    inset: 9px;
    border: 1px solid rgba(201,168,76,0.08);
    border-radius: 4px;
    pointer-events: none;
  }

  /* Display con los 5 d√≠gitos individuales */
  .display-row {
    display: flex;
    gap: 8px;
    justify-content: center;
    margin-bottom: 24px;
  }

  .digit-slot {
    width: 46px;
    height: 62px;
    background: #050a05;
    border: 1px solid #162016;
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'Courier Prime', monospace;
    font-size: 1.9rem;
    font-weight: 700;
    color: rgba(0,255,65,0.2);
    text-shadow: none;
    box-shadow: inset 0 0 14px rgba(0,255,65,0.06);
    transition: all 0.4s ease;
    position: relative;
  }

  .digit-slot.filled {
    color: #00ff41;
    text-shadow: 0 0 10px rgba(0,255,65,0.8);
    border-color: #1a3a1a;
    box-shadow: inset 0 0 18px rgba(0,255,65,0.15), 0 0 6px rgba(0,255,65,0.1);
  }

  .digit-slot.keyed {
    color: rgba(0,255,65,0.6);
  }

  .digit-slot.accepted {
    color: #60e880;
    text-shadow: 0 0 14px rgba(96,232,128,0.9);
    border-color: #2a5a2a;
    background: #060e06;
  }

  .keypad {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 9px;
    margin-bottom: 8px;
  }

  .key {
    background: linear-gradient(145deg, #3a3228, #282018);
    border: 1px solid #4a3e20;
    border-radius: 5px;
    color: #d0c090;
    font-family: 'Courier Prime', monospace;
    font-size: 1.2rem;
    font-weight: 700;
    padding: 13px;
    cursor: pointer;
    box-shadow: 0 3px 0 #1a1408, 0 4px 8px rgba(0,0,0,0.5);
    user-select: none;
    transition: all 0.08s;
  }
  .key:hover { background: linear-gradient(145deg, #4a4238, #383028); }
  .key:active { transform: translateY(2px); box-shadow: 0 1px 0 #1a1408; }
  .key-del { background: linear-gradient(145deg, #3a1e1e, #281414); border-color: #5a2a2a; color: #c06060; font-size: 0.75rem; letter-spacing: 0.05em; }
  .key-ok { background: linear-gradient(145deg, #183a20, #102816); border-color: #2a5a30; color: #60c080; font-size: 0.75rem; letter-spacing: 0.12em; }

  .safe-note { font-size: 0.72rem; color: var(--gold); opacity: 0.4; font-style: italic; margin-top: 6px; }

  /* ‚îÄ‚îÄ WIN ‚îÄ‚îÄ */
  #win-screen { display: none; text-align: center; animation: fadeIn 0.9s ease; }

  .envelope { font-size: 5rem; margin-bottom: 26px; animation: float 3s ease-in-out infinite; display: block; }

  .win-title {
    font-family: 'Special Elite', cursive;
    font-size: clamp(1.6rem, 5vw, 2.6rem);
    color: var(--gold-light);
    margin-bottom: 22px;
    text-shadow: 0 0 30px rgba(201,168,76,0.55);
  }

  .message-box {
    background: linear-gradient(135deg, rgba(201,168,76,0.05), rgba(201,168,76,0.02));
    border: 1px solid rgba(201,168,76,0.28);
    border-radius: 4px;
    padding: 32px 40px;
    max-width: 480px;
    margin: 0 auto;
    font-size: 1.04rem;
    line-height: 1.85;
    color: #d0c6a8;
    font-style: italic;
    position: relative;
  }
  .message-box::before {
    content: '"';
    font-family: 'Special Elite', cursive;
    font-size: 5rem;
    color: var(--gold);
    opacity: 0.18;
    position: absolute;
    top: -8px; left: 12px;
    line-height: 1;
  }

  /* ‚îÄ‚îÄ ANIMATIONS ‚îÄ‚îÄ */
  @keyframes shake { 0%,100%{transform:translateX(0)} 25%{transform:translateX(-7px)} 75%{transform:translateX(7px)} }
  @keyframes fadeIn { from{opacity:0;transform:translateY(18px)} to{opacity:1;transform:translateY(0)} }
  @keyframes float { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-13px)} }
  @keyframes popIn { 0%{opacity:0;transform:scale(0.92)} 100%{opacity:1;transform:scale(1)} }
  @keyframes glitch {
    0%{filter:none}
    20%{filter:hue-rotate(120deg) brightness(1.4);transform:translateX(2px)}
    40%{filter:none;transform:translateX(0)}
    60%{filter:hue-rotate(240deg) brightness(0.8);transform:translateX(-2px)}
    80%{filter:none;transform:translateX(0)}
  }
  .safe.glitch-anim { animation: glitch 0.35s steps(1) 4; }

  .particle {
    position: fixed; pointer-events: none;
    animation: fall linear forwards;
  }
  @keyframes fall { 0%{transform:translateY(-20px) rotate(0deg);opacity:1} 100%{transform:translateY(105vh) rotate(740deg);opacity:0} }
</style>
</head>
<body>
<div class="wrapper">

  <!-- ‚ïê‚ïê PANTALLA PRINCIPAL ‚ïê‚ïê -->
  <div id="clues-screen">
    <p class="stamp">Acertijo Semanal ¬∑ Para Mon ¬∑ Nivel Medio Experto</p>
    <h1>La Caja Fuerte</h1>
    <p class="subtitle">Cinco acertijos. Cada respuesta esconde un d√≠gito.</p>

    <!-- Barra de progreso con d√≠gitos revelados -->
    <div class="progress-wrap">
      <div class="prog-step">
        <div class="prog-circle" id="pc1">1</div>
        <div class="prog-digit" id="pd1">¬∑</div>
      </div>
      <div class="prog-line" id="pl1"></div>
      <div class="prog-step">
        <div class="prog-circle" id="pc2">2</div>
        <div class="prog-digit" id="pd2">¬∑</div>
      </div>
      <div class="prog-line" id="pl2"></div>
      <div class="prog-step">
        <div class="prog-circle" id="pc3">3</div>
        <div class="prog-digit" id="pd3">¬∑</div>
      </div>
      <div class="prog-line" id="pl3"></div>
      <div class="prog-step">
        <div class="prog-circle" id="pc4">4</div>
        <div class="prog-digit" id="pd4">¬∑</div>
      </div>
      <div class="prog-line" id="pl4"></div>
      <div class="prog-step">
        <div class="prog-circle" id="pc5">5</div>
        <div class="prog-digit" id="pd5">¬∑</div>
      </div>
    </div>

    <div class="clues">

      <!-- ‚îÄ‚îÄ‚îÄ ACERTIJO 1 ‚Äî respuesta: CARPE DIEM ‚Üí d√≠gito 7 ‚îÄ‚îÄ‚îÄ -->
      <div class="clue-card" id="card-1">
        <div class="clue-header">
          <span class="clue-num">// Acertijo 01</span>
          <span class="clue-tag">Responde con una frase</span>
        </div>
        <p class="clue-text">
          Gather ye rosebuds while ye may<br>
        </p>
        <div class="answer-row">
          <input class="answer-input" type="text" id="ai1" placeholder="Tu respuesta..." autocomplete="off" autocorrect="off" spellcheck="false">
          <button class="btn-verify" id="bv1" onclick="verify(1)">Verificar ‚Üí</button>
          <button class="hint-btn" onclick="toggleHint('hb1')">[ pista ]</button>
        </div>
        <div class="hint-box" id="hb1">Hasta crees que hay pistas ni√±eee</div>
        <div class="digit-reveal" id="dr1">
          <span class="big-digit" id="dnum1">?</span>
          <span class="reveal-text">¬°Correcto! El primer d√≠gito de la caja es el <strong id="dtext1">?</strong>.</span>
        </div>
      </div>

      <!-- ‚îÄ‚îÄ‚îÄ ACERTIJO 2 ‚Äî respuesta: LA MUERTE ‚Üí d√≠gito 3 ‚îÄ‚îÄ‚îÄ -->
      <div class="clue-card" id="card-2">
        <div class="clue-header">
          <span class="clue-num">// Acertijo 02</span>
          <span class="clue-tag">Responde con una frase</span>
        </div>
        <p class="clue-text">
          ¬øQui√©n es Joe Black?<br>
        </p>
        <div class="answer-row">
          <input class="answer-input" type="text" id="ai2" placeholder="Tu respuesta..." autocomplete="off" autocorrect="off" spellcheck="false">
          <button class="btn-verify" id="bv2" onclick="verify(2)">Verificar ‚Üí</button>
          <button class="hint-btn" onclick="toggleHint('hb2')">[ pista ]</button>
        </div>
        <div class="hint-box" id="hb2">Caiste de nuevo</div>
        <div class="digit-reveal" id="dr2">
          <span class="big-digit" id="dnum2">?</span>
          <span class="reveal-text">¬°Correcto! El segundo d√≠gito de la caja es el <strong id="dtext2">?</strong>.</span>
        </div>
      </div>

      <!-- ‚îÄ‚îÄ‚îÄ ACERTIJO 3 ‚Äî respuesta: AJEDREZ ‚Üí d√≠gito 4 ‚îÄ‚îÄ‚îÄ -->
      <div class="clue-card" id="card-3">
        <div class="clue-header">
          <span class="clue-num">// Acertijo 03</span>
          <span class="clue-tag">Responde con una palabra</span>
        </div>
        <p class="clue-text">
          Tengo rey pero no corona.<br>
          Tengo torres pero no castillos.<br>
          Tengo alfiles pero no iglesia.<br>
          Tengo caballos pero no establos.<br><br>
          ¬øQu√© soy?
        </p>
        <div class="answer-row">
          <input class="answer-input" type="text" id="ai3" placeholder="Tu respuesta..." autocomplete="off" autocorrect="off" spellcheck="false">
          <button class="btn-verify" id="bv3" onclick="verify(3)">Verificar ‚Üí</button>
          <button class="hint-btn" onclick="toggleHint('hb3')">[ pista ]</button>
        </div>
        <div class="hint-box" id="hb3">OoooOoOoh que no hay pistas babas</div>
        <div class="digit-reveal" id="dr3">
          <span class="big-digit" id="dnum3">?</span>
          <span class="reveal-text">¬°Correcto! El tercer d√≠gito de la caja es el <strong id="dtext3">?</strong>.</span>
        </div>
      </div>

      <!-- ‚îÄ‚îÄ‚îÄ ACERTIJO 4 ‚Äî respuesta: 31/01/2026 ‚Üí d√≠gito 8 ‚îÄ‚îÄ‚îÄ -->
      <div class="clue-card" id="card-4">
        <div class="clue-header">
          <span class="clue-num">// Acertijo 04</span>
          <span class="clue-tag">Responde con una fecha, con este estilo DD/MM/YYYY</span>
        </div>
        <p class="clue-text">
          El dia m√°s afortunado de tu vida. <br>
        <div class="answer-row">
          <input class="answer-input" type="text" id="ai4" placeholder="Tu respuesta..." autocomplete="off" autocorrect="off" spellcheck="false">
          <button class="btn-verify" id="bv4" onclick="verify(4)">Verificar ‚Üí</button>
          <button class="hint-btn" onclick="toggleHint('hb4')">[ pista ]</button>
        </div>
        <div class="hint-box" id="hb4">Neta tienes que dejar de presionarme.</div>
        <div class="digit-reveal" id="dr4">
          <span class="big-digit" id="dnum4">?</span>
          <span class="reveal-text">¬°Correcto! El cuarto d√≠gito de la caja es el <strong id="dtext4">?</strong>.</span>
        </div>
      </div>

      <!-- ‚îÄ‚îÄ‚îÄ ACERTIJO 5 ‚Äî respuesta: GOLDEN RETRIEVER  ‚Üí d√≠gito 6 ‚îÄ‚îÄ‚îÄ -->
      <div class="clue-card" id="card-5">
        <div class="clue-header">
          <span class="clue-num">// Acertijo 05</span>
          <span class="clue-tag">Responde con una raza</span>
        </div>
        <p class="clue-text">
          ¬øQu√© raza de Therian ser√≠as?<br>
        </p>
        <div class="answer-row">
          <input class="answer-input" type="text" id="ai5" placeholder="Tu respuesta..." autocomplete="off" autocorrect="off" spellcheck="false">
          <button class="btn-verify" id="bv5" onclick="verify(5)">Verificar ‚Üí</button>
          <button class="hint-btn" onclick="toggleHint('hb5')">[ pista ]</button>
        </div>
        <div class="hint-box" id="hb5">TQ jijijiji</div>
        <div class="digit-reveal" id="dr5">
          <span class="big-digit" id="dnum5">?</span>
          <span class="reveal-text">¬°Correcto! El quinto d√≠gito de la caja es el <strong id="dtext5">?</strong>.</span>
        </div>
      </div>

    </div>

    <div class="divider"><span>‚óÜ</span></div>

    <!-- ‚ïê‚ïê CAJA FUERTE ‚ïê‚ïê -->
    <div class="safe-section">
      <p class="safe-label">// Introduce la combinaci√≥n de 5 d√≠gitos</p>
      <div class="safe" id="the-safe">
        <div class="display-row">
          <div class="digit-slot" id="ds0">_</div>
          <div class="digit-slot" id="ds1">_</div>
          <div class="digit-slot" id="ds2">_</div>
          <div class="digit-slot" id="ds3">_</div>
          <div class="digit-slot" id="ds4">_</div>
        </div>
        <div class="keypad">
          <button class="key" onclick="pressKey('1')">1</button>
          <button class="key" onclick="pressKey('2')">2</button>
          <button class="key" onclick="pressKey('3')">3</button>
          <button class="key" onclick="pressKey('4')">4</button>
          <button class="key" onclick="pressKey('5')">5</button>
          <button class="key" onclick="pressKey('6')">6</button>
          <button class="key" onclick="pressKey('7')">7</button>
          <button class="key" onclick="pressKey('8')">8</button>
          <button class="key" onclick="pressKey('9')">9</button>
          <button class="key key-del" onclick="pressDelete()">BORRAR</button>
          <button class="key" onclick="pressKey('0')">0</button>
          <button class="key key-ok" onclick="pressEnter()">ABRIR</button>
        </div>
      </div>
      <p class="safe-note">Los d√≠gitos aparecen al resolver cada acertijo</p>
    </div>
  </div>

  <!-- ‚ïê‚ïê PANTALLA VICTORIA ‚ïê‚ïê -->
  <div id="win-screen">
    <span class="envelope">üíå</span>
    <h2 class="win-title">¬°Caja abierta!</h2>
    <div class="message-box">
      Feliciades chula!!! Esto lo hice pensando en ti, espero te haya gustado. Tu premio ser√° acompa√±arme a ver HAMNET
      <br><br>
      <img src="https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExYnFwbXZua28xbHludGJnMjM3eGEwMm1vNTc1bHJ6ZWo3MnhsbndneCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/36qnm6xRzruzm/giphy.gif" alt="" style="max-width: 100%; border-radius: 8px; margin-top: 10px;">
    </div>
  </div>

</div>

<script>
  // ‚ïê‚ïê CONFIGURACI√ìN ‚ïê‚ïê
  // Respuestas aceptadas (en may√∫sculas, sin tildes, m√∫ltiples variantes)
  const CLUES = [
    { answers: ['CARPE DIEM'],         digit: '7' },
    { answers: ['LA MUERTE'],          digit: '3' },
    { answers: ['AJEDREZ'],            digit: '4' },
    { answers: ['31/01/2026'],         digit: '8' },
    { answers: ['GOLDEN RETRIEVER'],   digit: '6' },
  ];
  const COMBO = '73486'; // 7¬∑3¬∑4¬∑8¬∑6

  let current = '';
  let solved = [false, false, false, false, false];

  // Animaci√≥n de entrada
  document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('.clue-card').forEach((c, i) => {
      setTimeout(() => c.classList.add('visible'), 150 + i * 170);
    });
  });

  // Normalizar texto: quitar tildes, may√∫sculas, espacios
  function normalize(str) {
    return str
      .toUpperCase()
      .normalize('NFD')
      .replace(/[\u0300-\u036f]/g, '')
      .trim();
  }

  function verify(n) {
    const idx = n - 1;
    const input = document.getElementById('ai' + n);
    const btn   = document.getElementById('bv' + n);
    const dr    = document.getElementById('dr' + n);
    const card  = document.getElementById('card-' + n);
    const pc    = document.getElementById('pc' + n);
    const pd    = document.getElementById('pd' + n);
    const digit = CLUES[idx].digit;
    const val   = normalize(input.value);

    if (CLUES[idx].answers.map(normalize).includes(val)) {
      // ‚úÖ Correcto
      input.classList.add('correct');
      input.disabled = true;
      btn.disabled = true;
      card.classList.add('solved');

      // Revelar d√≠gito en la card
      document.getElementById('dnum' + n).textContent = digit;
      document.getElementById('dtext' + n).textContent = digit;
      dr.classList.add('show');

      // Actualizar progreso
      pc.classList.add('done');
      pc.textContent = '‚úì';
      pd.textContent = digit;
      pd.classList.add('revealed');
      if (n < 5) document.getElementById('pl' + n).classList.add('done');

      // Marcar como resuelto y actualizar display de caja
      solved[idx] = true;
    } else {
      // ‚ùå Incorrecto
      input.classList.remove('correct');
      input.classList.add('wrong');
      setTimeout(() => {
        input.classList.remove('wrong');
        input.value = '';
      }, 500);
    }
  }

  function toggleHint(id) {
    document.getElementById(id).classList.toggle('open');
  }

  // ‚ïê‚ïê TECLADO CAJA FUERTE ‚ïê‚ïê
  function pressKey(k) {
    if (current.length < 5) {
      current += k;
      const slot = document.getElementById('ds' + (current.length - 1));
        slot.textContent = k;
        slot.classList.add('keyed');
    }
  }

  function pressDelete() {
    if (current.length > 0) {
      const idx = current.length - 1;
      current = current.slice(0, -1);
      if (!solved[idx]) {
        const slot = document.getElementById('ds' + idx);
        slot.textContent = '_';
        slot.classList.remove('keyed');
      }
    }
  }

  function pressEnter() {
    if (current.length < 5) return;
    const safe = document.getElementById('the-safe');

    if (current === COMBO) {
      document.querySelectorAll('.digit-slot').forEach(s => s.classList.add('accepted'));
      setTimeout(showWin, 900);
    } else {
      safe.classList.add('glitch-anim');
      setTimeout(() => {
        safe.classList.remove('glitch-anim');
        // Reset solo los slots no resueltos
        current = '';
        CLUES.forEach((c, i) => {
          const slot = document.getElementById('ds' + i);
          if (!solved[i]) {
            slot.textContent = '_';
            slot.classList.remove('keyed');
          }
        });
      }, 1400);
    }
  }

  function showWin() {
    document.getElementById('clues-screen').style.display = 'none';
    document.getElementById('win-screen').style.display = 'block';
    launchConfetti();
  }

  function launchConfetti() {
    const colors = ['#c9a84c','#f0d080','#d4af37','#fff4b0','#a07828','#8b6010'];
    for (let i = 0; i < 100; i++) {
      setTimeout(() => {
        const p = document.createElement('div');
        p.className = 'particle';
        const size = 5 + Math.random() * 9;
        p.style.cssText = `
          left:${Math.random()*100}vw; top:-12px;
          background:${colors[Math.floor(Math.random()*colors.length)]};
          animation-duration:${1.8+Math.random()*2.5}s;
          animation-delay:${Math.random()*0.5}s;
          width:${size}px; height:${size}px;
          border-radius:${Math.random()>.5?'50%':'2px'};
          opacity:${0.7+Math.random()*0.3};
        `;
        document.body.appendChild(p);
        setTimeout(() => p.remove(), 5500);
      }, i * 20);
    }
  }

  // Teclado f√≠sico para la caja
  document.addEventListener('keydown', e => {
    if (e.target.tagName === 'INPUT') return; // no interferir con los inputs de texto
    if (e.key >= '0' && e.key <= '9') pressKey(e.key);
    if (e.key === 'Backspace') pressDelete();
    if (e.key === 'Enter') pressEnter();
  });

  // Enter en inputs de texto
  document.querySelectorAll('.answer-input').forEach((inp, i) => {
    inp.addEventListener('keydown', e => {
      if (e.key === 'Enter') verify(i + 1);
    });
  });
</script>
</body>
</html>
